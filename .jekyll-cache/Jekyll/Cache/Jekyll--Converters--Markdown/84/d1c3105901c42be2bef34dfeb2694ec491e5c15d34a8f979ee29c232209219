I"<h2 id="연관관계-매핑">연관관계 매핑</h2>

<p>일반적으로 DB테이블은 FK 를 이용한 Join 을 통해 서로 간에 연관관계를 맺는다.<br />
이러한 내용을 객체지향 모델링에 반영하여 <code class="language-plaintext highlighter-rouge">객체의 참조와 DB의 FK를 반영하는 것을 연관관계 매핑</code>이라 한다.<br /></p>

<h2 id="단방향양방향-연관관계와-연관관계의-주인">단방향/양방향 연관관계와 연관관계의 주인</h2>
<p>연관관계 매핑의 유형을 알아보기에 앞서서, 객체의 연관관계는 DB와는 다르게 <span style="color:red">단방향, 양방향</span>이라는 방향성이 존재한다.<br />
DB의 경우 한쪽 테이블에 FK 가 존재하면 어느 테이블에서든 join 을 통해 서로간에 참조가 가능하지만<br />
객체의 경우 참조하고자 하는 객체의 참조가 존재하지 않으면 상대방을 참조할 수 없다.<br />
즉, <span style="color:red">양방향 연관관계는 단방향 연관관계 2개가 합쳐진 모양</span>이 된다.<br /></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Team</span> <span class="n">team</span><span class="o">;</span> <span class="c1">// Team 객체를 조회하기 위한 단방향 연관관계</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Team</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">members</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;();</span> <span class="c1">// Member 객체를 조회하기 위한 단방향 연관관계</span>
<span class="o">}</span>
</code></pre></div></div>
<p>위 예시를 보면 2개의 단방향 연관관계가 합쳐져서 서로간의 참조가 가능한 양방향 연관관계를 생성하고 있음을 알 수 있다.<br />
이때 <span style="color:red">DB의 FK에 해당하는 항목을 어느 객체에서 관리할 것인가</span>가 중요한 문제가 된다.<br />
이 FK를 관리하는 객체를 <span style="color:red">연관관계의 주인</span>이라 하는데<br />
명확하게 <span style="color:red"><code class="language-plaintext highlighter-rouge">FK가 포함된 DB의 테이블과 매핑된 객체를 연관관계의 주인</code></span>으로 설정하면 된다.<br />
만약 반대로 세팅할 경우 아래처럼 의도치 않은 작동을 할 수 있다.<br /></p>

<p>연관관계 매핑 유형에는 크게 4가지가 있다.</p>

<ul>
  <li>@ManyToOne(N:1)</li>
  <li>@OneToMany(1:N)</li>
</ul>
:ET